
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A graphical tool for planning time-optimized trajectories for autonomous mobile robots in the FIRST Robotics Competition.">
      
      
      
        <link rel="canonical" href="https://choreo.autos/choreolib/auto-factory/">
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../trajectory-api/">
      
      
      <link rel="icon" href="../../media/icon1024x1024.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Auto Factory - Choreo Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#autofactory-java-only" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Choreo Documentation" class="md-header__button md-logo" aria-label="Choreo Documentation" data-md-component="logo">
      
  <img src="../../media/icon1024x1024.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Choreo Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Auto Factory
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SleipnirGroup/Choreo/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SleipnirGroup/Choreo
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../usage/editing-paths/" class="md-tabs__link">
          
  
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  
  ChoreoLib

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/trajoptlib/cpp/index.html" class="md-tabs__link">
          
  
  
  TrajoptLib (Internal API)

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../contributing/building-choreo/" class="md-tabs__link">
          
  
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Choreo Documentation" class="md-nav__button md-logo" aria-label="Choreo Documentation" data-md-component="logo">
      
  <img src="../../media/icon1024x1024.png" alt="logo">

    </a>
    Choreo Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SleipnirGroup/Choreo/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SleipnirGroup/Choreo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../document-settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Document Settings Panel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../document-settings/robot-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Robot Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/editing-paths/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editing Paths
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/controls-shortcuts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controls & Shortcuts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/saving/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Saving
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/view-options-panel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    View Options Panel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/estimating-moi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estimating Moment of Inertia
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    ChoreoLib
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ChoreoLib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Auto Factory
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Auto Factory
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-command-compositions" class="md-nav__link">
    <span class="md-ellipsis">
      Using Command Compositions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-autoroutine" class="md-nav__link">
    <span class="md-ellipsis">
      Using AutoRoutine
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-bindings" class="md-nav__link">
    <span class="md-ellipsis">
      Auto Bindings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#autochooser" class="md-nav__link">
    <span class="md-ellipsis">
      AutoChooser
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trajectory-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trajectory API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/choreolib/java/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/choreolib/cpp/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++ API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    TrajoptLib (Internal API)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            TrajoptLib (Internal API)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/trajoptlib/cpp/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++ API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/building-choreo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Choreo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/building-choreolib/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building ChoreoLib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/building-docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/contributing-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/release-process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Process
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/schema-upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Upgrading File Schemas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/sample-flipping/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sample Flipping Logic
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="autofactory-java-only">AutoFactory (Java Only)</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This API is only available for Java. C++ and Python users should instead utilize the <a href="../trajectory-api/">Trajectory API</a>.</p>
</div>
<p>ChoreoLib provides the <code>AutoFactory</code> (<a href="/api/choreolib/java/choreo/auto/AutoFactory.html">Java</a>) class as a higher level API to make it easier to create complex auto routines inside your robot code.</p>
<div class="language-java highlight"><span class="filename">Robot.java</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Robot</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TimedRobot</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Drive</span><span class="w"> </span><span class="n">driveSubsystem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Drive</span><span class="p">();</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AutoFactory</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Robot</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">        </span><span class="n">autoFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AutoFactory</span><span class="p">(</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">            </span><span class="n">driveSubsystem</span><span class="p">::</span><span class="n">getPose</span><span class="p">,</span><span class="w"> </span><span class="c1">// A function that returns the current robot pose</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">            </span><span class="n">driveSubsystem</span><span class="p">::</span><span class="n">resetOdometry</span><span class="p">,</span><span class="w"> </span><span class="c1">// A function that resets the current robot pose to the provided Pose2d</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">            </span><span class="n">driveSubsystem</span><span class="p">::</span><span class="n">followTrajectory</span><span class="p">,</span><span class="w"> </span><span class="c1">// The drive subsystem trajectory follower (1)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">            </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// If alliance flipping should be enabled (2)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">            </span><span class="n">driveSubsystem</span><span class="p">,</span><span class="w"> </span><span class="c1">// The drive subsystem</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="p">);</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>See <a href="../getting-started/#setting-up-the-drive-subsystem">Getting Started</a> for more details on how to implement a trajectory follower in your drive subsystem.</li>
<li>It is recommended for trajectories to be created only on the blue side of the field in the Choreo application. Enabling alliance flipping will automatically mirror trajectories to the red side of the field if the robot is on the red alliance.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is recommended for your <code>AutoFactory</code> to be created at the Robot scope (e.g. in the <code>Robot</code> or <code>RobotContainer</code> constructor), not in the drive subsystem. Some teams may opt to create a separate class (ex <code>Autos.java</code>) that is given the robot's subsystems, and contains all code relevant to constructing autonomous routines.</p>
</div>
<p>There are two ways to create autos with an <code>AutoFactory</code>: <a href="#using-command-compositions">command compositions</a> or the <a href="#using-autoroutine"><code>AutoRoutine</code></a> class. For short and simple autos, command compositions may be the best choice for you. However, if your auto includes many segments, complex logic, or branching behavior, utilizing <code>AutoRoutine</code> is likely the best option.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following examples use "segmented" trajectories: multiple reusable small trajectories that can be combined to create an entire autonomous sequence. You may be used to the more traditional approach of "monolithic" trajectories, which is a single trajectory that spans the entire autonomous period, running from start to finish without stopping.</p>
<p>Monolithic trajectories may be more cumbersome in some scenarios (<em>especially</em> for branching autos), and you may find it more difficult to inject logic in-between points of interest along a trajectory.</p>
<p>With this in mind, if you don't plan on creating branching autos you can still achieve segmented trajectory behavior with a monolithic trajectory by using the "Split" checkbox on a waypoint in the Choreo application. Overloads for trajectory related methods provide an argument to define the index of these splits to fetch a trajectory segment from.</p>
</div>
<h2 id="using-command-compositions">Using Command Compositions</h2>
<p class="annotate">Command compositions is how most teams architect their autonomous routines. Typically a single <code>Commands.sequence()</code> (1), with a list of commands that define a sequential list of actions for your robot to execute during the autonomous period.</p>
<ol>
<li>Your team may use a <code>SequentialCommandGroup</code> subclass</li>
</ol>
<p>The <code>AutoFactory</code> class provides the <code>trajectoryCmd()</code> method, which creates a command that will follow the specified trajectory.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// Follows deploy/choreo/myTrajectory.traj</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">Command</span><span class="w"> </span><span class="n">myTrajectory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">trajectoryCmd</span><span class="p">(</span><span class="s">&quot;myTrajectory&quot;</span><span class="p">);</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Trajectories are sampled using a timer, which also dictates when the command ends. This means that your robot is technically not guaranteed to finish exactly at the end of a trajectory. Properly tuning your robot's drivetrain as well as feedback gains in your trajectory follower will mitigate this error.</p>
</div>
<p>You can then combine trajectory commands with other functions of your robot to create an autonomous routine. For more information about command compositions, check out <a href="https://docs.wpilib.org/en/stable/docs/software/commandbased/command-compositions.html">WPILib's documentation</a>.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">pickupAndScoreAuto</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">        </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(</span><span class="s">&quot;pickupGamepiece&quot;</span><span class="p">),</span><span class="w"> </span><span class="c1">// (1)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">        </span><span class="n">Commands</span><span class="p">.</span><span class="na">deadline</span><span class="p">(</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">            </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">trajectoryCmd</span><span class="p">(</span><span class="s">&quot;pickupGamepiece&quot;</span><span class="p">),</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">            </span><span class="n">intakeSubsystem</span><span class="p">.</span><span class="na">intake</span><span class="p">()</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">        </span><span class="p">),</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="n">Commands</span><span class="p">.</span><span class="na">parallel</span><span class="p">(</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">            </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">trajectoryCmd</span><span class="p">(</span><span class="s">&quot;scoreGamepiece&quot;</span><span class="p">),</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">            </span><span class="n">scoringSubsystem</span><span class="p">.</span><span class="na">getReady</span><span class="p">()</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">        </span><span class="n">scoringSubsystem</span><span class="p">.</span><span class="na">score</span><span class="p">()</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>
<p>You should always reset your robot's odometry to the start of the first trajectory being followed in an autonomous routine. <code>AutoFactory.resetOdometry()</code> will accomplish this, setting the robot's pose to the start of the specified trajectory.</p>
<p>Advanced users may use vision to get the robot's starting position, however this is not recommended for most teams.</p>
</li>
<li>
<p>Throughout this documentation, we assume you are using <a href="https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html#instance-command-factory-methods">command factory methods</a> in your subsystems, which is a more concise alternative to command classes (i.e. <code>new IntakeCommand()</code>).</p>
</li>
</ol>
<h2 id="using-autoroutine">Using AutoRoutine</h2>
<p>While command compositions may be an effective architecture in many cases, it has a tendency to become unwieldy if your autonomous routine has branches, if your subsystems use default commands, or if you want your subsystems to run independently and "hand off" actions to each other. The <code>AutoRoutine</code> (<a href="/api/choreolib/java/choreo/auto/AutoRoutine.html">Java</a>) class aims to solve these problems, using WPILib's <a href="https://docs.wpilib.org/en/stable/docs/software/commandbased/binding-commands-to-triggers.html"><code>Trigger</code></a> class to define a control flow based on reactions to state that don't require subsystems until they are needed.</p>
<p>To get started, create a new routine using <code>AutoFactory.newRoutine()</code>:</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">// Creates a new routine with the name &quot;exampleRoutine&quot;</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">AutoRoutine</span><span class="w"> </span><span class="n">routine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">newRoutine</span><span class="p">(</span><span class="s">&quot;exampleRoutine&quot;</span><span class="p">);</span>
</span></code></pre></div>
<p>The "entrance" to all routines is the <code>AutoRoutine.active()</code> trigger. You should bind the first command you want to execute to this trigger.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">Commands</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Started the routine!&quot;</span><span class="p">));</span>
</span></code></pre></div>
<p>Trajectories can be loaded using <code>AutoRoutine.trajectory()</code>, which will return an <code>AutoTrajectory</code> (<a href="/api/choreolib/java/choreo/auto/AutoTrajectory.html">Java</a>). The <code>AutoTrajectory</code> class exposes multiple triggers for you to attach reactive logic to, as well as <code>AutoTrajectory.cmd()</code> for scheduling the trajectory.</p>
<div class="language-java highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="nf">pickupAndScoreAuto</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="n">routine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">newRoutine</span><span class="p">(</span><span class="s">&quot;taxi&quot;</span><span class="p">);</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="c1">// Load the routine&#39;s trajectories</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">driveToMiddle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;driveToMiddle&quot;</span><span class="p">);</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="c1">// When the routine begins, reset odometry and start the first trajectory (1)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">        </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">            </span><span class="n">driveToMiddle</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(),</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">            </span><span class="n">driveToMiddle</span><span class="p">.</span><span class="na">cmd</span><span class="p">()</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">routine</span><span class="p">;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="p">}</span>
</span></code></pre></div>
<p>AuoTrajectories have a variety of triggers that can be used to attach logic to the trajectory, these include:</p>
<ul>
<li><code>active()</code> - Triggered when the trajectory is active</li>
<li><code>inactive()</code> - Triggered when the trajectory is inactive, equivalent to <code>active().negate()</code></li>
<li><code>atTime(String)</code> / <code>atTime(double)</code> - Triggered when the trajectory reaches a specific time based on a value or event marker</li>
<li><code>atPose(String, double, double)</code> / <code>atPose(Pose2d, double, double)</code> - Triggered when the robot reaches a specific pose based on a value or event marker</li>
<li><code>done()</code> - Triggered for 1 cycle after the trajectory is finished</li>
<li><code>doneDelayed(int)</code> - Triggered for 1 cycle <code>n</code> cycles after the trajectory is finished</li>
<li><code>doneFor(int)</code> - Triggered for <code>n</code> cycles after the trajectory is finished</li>
<li><code>recentlyDone()</code> - Triggered after the trajectory is finished until another trajectory is started</li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="nf">pickupAndScoreAuto</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="n">routine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">newRoutine</span><span class="p">(</span><span class="s">&quot;pickupAndScore&quot;</span><span class="p">);</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="c1">// Load the routine&#39;s trajectories</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">pickupTraj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;pickupGamepiece&quot;</span><span class="p">);</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">scoreTraj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;scoreGamepiece&quot;</span><span class="p">);</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="c1">// When the routine begins, reset odometry and start the first trajectory (1)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">        </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">            </span><span class="n">pickupTraj</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(),</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">            </span><span class="n">pickupTraj</span><span class="p">.</span><span class="na">cmd</span><span class="p">()</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="c1">// Starting at the event marker named &quot;intake&quot;, run the intake (2)</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="n">pickupTraj</span><span class="p">.</span><span class="na">atTime</span><span class="p">(</span><span class="s">&quot;intake&quot;</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">intakeSubsystem</span><span class="p">.</span><span class="na">intake</span><span class="p">());</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="c1">// When the trajectory is done, start the next trajectory</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="n">pickupTraj</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">scoreTraj</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">    </span><span class="c1">// While the trajectory is active, prepare the scoring subsystem</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">    </span><span class="n">scoreTraj</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">whileTrue</span><span class="p">(</span><span class="n">scoringSubsystem</span><span class="p">.</span><span class="na">getReady</span><span class="p">());</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">    </span><span class="c1">// When the trajectory is done, score</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="n">scoreTraj</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">scoringSubsystem</span><span class="p">.</span><span class="na">score</span><span class="p">());</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">routine</span><span class="p">;</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li>
<p>You should always reset your robot's odometry to the start of the first trajectory being followed in an autonomous routine. <code>AutoTrajectory.resetOdometry()</code> will accomplish this, setting the robot's pose to the start of the specified trajectory.</p>
<p>Advanced users may use vision to get the robot's starting position, however this is not recommended for most teams.</p>
</li>
<li>
<p>Alternatively, you can use <code>AutoTrajectory.atPose()</code> for utilizing event markers. See the <a href="/api/choreolib/java/choreo/auto/AutoTrajectory.html#atPose(java.lang.String,double,double)">Java reference documentation</a> for more information about behavior.</p>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code>AutoTrajectory.done()</code> trigger is only <code>true</code> for one cycle of the command scheduler after the trajectory is finished, meaning that using bindings such as <code>Trigger.whileTrue()</code> may not produce the desired behavior. Instead, use bindings such as <code>Trigger.onTrue()</code>.</p>
</div>
<p>Traditional triggers can also be used in conjunction with an auto routine. However, they will experience "hygiene" issues if not used correctly, causing them to be active even when the routine is not. You must either:</p>
<ul>
<li>Use <code>AutoRoutine.observe()</code> to ensure the trigger is only active when the routine is active</li>
<li>Conjoin a trigger to one created by <code>AutoRoutine</code> or <code>AutoTrajectory</code></li>
</ul>
<div class="language-java highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">Trigger</span><span class="w"> </span><span class="n">myTrigger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Trigger</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">condition</span><span class="p">);</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1">// Safe</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">routine</span><span class="p">.</span><span class="na">observe</span><span class="p">(</span><span class="n">myTrigger</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">Commands</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Foo&quot;</span><span class="p">));</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">and</span><span class="p">(</span><span class="n">myTrigger</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">Commands</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Bar&quot;</span><span class="p">));</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1">// Unsafe</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="n">myTrigger</span><span class="p">.</span><span class="na">onTrue</span><span class="p">(</span><span class="n">Commands</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Foo&quot;</span><span class="p">));</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="n">myTrigger</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">()).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">Commands</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="s">&quot;Bar&quot;</span><span class="p">));</span>
</span></code></pre></div>
<p>Sometimes, you may want to implement a "branching auto": an autonomous routine that changes behavior based on the state of the robot. An excellent example for the need of branching autos is the <a href="https://youtu.be/9keeDyFxzY4">2024 season</a>, where robots would race to the midline to grab a gamepiece. If another robot beat yours to the midline, or your robot missed a game piece, a common strategy was to go directly to the next gamepiece on the midline, instead of coming back to score. As an example, <a href="https://youtu.be/_gcezRaGP5A?t=6">this match</a> from the 2024 championship shows both 254 and 3339 running branching autos.</p>
<p>Below is an example auto routine from the 2024 season, taking advantage of the <code>AutoRoutine</code> paradigm:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be careful when using <code>Commands.either()</code> to achieve branching behavior. The resulting composition will require subsystems from both the <code>onTrue</code> and <code>onFalse</code> commands, which may block default commands that would otherwise be expected to run. As shown in the example below, chaining triggers is the recommended pattern for creating a branching auto.</p>
</div>
<div class="language-java highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kd">public</span><span class="w"> </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="nf">branching2024Auto</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="n">routine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">.</span><span class="na">newRoutine</span><span class="p">(</span><span class="s">&quot;branching2024Auto&quot;</span><span class="p">);</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="c1">// This routine uses segments between pre-defined handoff points.</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">    </span><span class="c1">// Expand the tooltip for information about their naming convention -&gt; (1)</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="c1">// Load the routine&#39;s trajectories</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">startToC2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;startToC2&quot;</span><span class="p">);</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">C2toM1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;C2toM1&quot;</span><span class="p">);</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">M1toM2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;M1toM2&quot;</span><span class="p">);</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">M2toM3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;M2toM3&quot;</span><span class="p">);</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">M1toScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;M1toScore&quot;</span><span class="p">);</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">M2toScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;M2toScore&quot;</span><span class="p">);</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">M3toScore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;M3toScore&quot;</span><span class="p">);</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">scoreToM2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;scoreToM2&quot;</span><span class="p">);</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="n">AutoTrajectory</span><span class="w"> </span><span class="n">scoreToM3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">trajectory</span><span class="p">(</span><span class="s">&quot;scoreToM3&quot;</span><span class="p">);</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">    </span><span class="c1">// When the routine starts, reset odometry, shoot the first gamepiece, then go to the &quot;C2&quot; location</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="n">routine</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">        </span><span class="n">Commands</span><span class="p">.</span><span class="na">sequence</span><span class="p">(</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">            </span><span class="n">startToC2</span><span class="p">.</span><span class="na">resetOdometry</span><span class="p">(),</span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">            </span><span class="n">shooterSubsystem</span><span class="p">.</span><span class="na">shoot</span><span class="p">(),</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">            </span><span class="n">startToC2</span><span class="p">.</span><span class="na">cmd</span><span class="p">()</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">    </span><span class="p">);</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">    </span><span class="c1">// Pick up and shoot the gamepiece at the &quot;C2&quot; location, then go to the &quot;M1&quot; location</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="n">startToC2</span><span class="p">.</span><span class="na">active</span><span class="p">().</span><span class="na">whileTrue</span><span class="p">(</span><span class="n">intakeSubsystem</span><span class="p">.</span><span class="na">intake</span><span class="p">());</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">    </span><span class="n">startToC2</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">.</span><span class="na">shoot</span><span class="p">().</span><span class="na">andThen</span><span class="p">(</span><span class="n">C2toM1</span><span class="p">.</span><span class="na">cmd</span><span class="p">()));</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="w">    </span><span class="c1">// Run the intake when we are approaching a gamepiece</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="w">    </span><span class="n">routine</span><span class="p">.</span><span class="na">anyActive</span><span class="p">(</span><span class="n">C2toM1</span><span class="p">,</span><span class="w"> </span><span class="n">scoreToM2</span><span class="p">,</span><span class="w"> </span><span class="n">scoreToM3</span><span class="p">,</span><span class="w"> </span><span class="n">M1toM2</span><span class="p">,</span><span class="w"> </span><span class="n">M2toM3</span><span class="p">)</span><span class="w"> </span><span class="c1">// (2)</span>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="w">        </span><span class="p">.</span><span class="na">whileTrue</span><span class="p">(</span><span class="n">intakeSubsystem</span><span class="p">.</span><span class="na">intake</span><span class="p">());</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="w">    </span><span class="c1">// If we picked up the gamepiece, go score, then go to the next midline location</span>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">    </span><span class="c1">// If we didn&#39;t pick up the gamepiece, go directly to the next midline location</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">    </span><span class="c1">// M1</span>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="w">    </span><span class="n">Trigger</span><span class="w"> </span><span class="n">atM1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">C2toM1</span><span class="p">.</span><span class="na">done</span><span class="p">();</span>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">    </span><span class="n">atM1</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">::</span><span class="n">noGamepiece</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">M1toM2</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">    </span><span class="n">atM1</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">::</span><span class="n">hasGamepiece</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">M1toScore</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="w">    </span><span class="n">M1toScore</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">.</span><span class="na">shoot</span><span class="p">().</span><span class="na">andThen</span><span class="p">(</span><span class="n">scoreToM2</span><span class="p">.</span><span class="na">cmd</span><span class="p">()));</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">    </span><span class="c1">// M2</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="w">    </span><span class="n">Trigger</span><span class="w"> </span><span class="n">atM2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">anyDone</span><span class="p">(</span><span class="n">scoreToM2</span><span class="p">,</span><span class="w"> </span><span class="n">M1toM2</span><span class="p">);</span><span class="w"> </span><span class="c1">// (3)</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">    </span><span class="n">atM2</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">::</span><span class="n">noGamepiece</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">M2toM3</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">    </span><span class="n">atM2</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">::</span><span class="n">hasGamepiece</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">M2toScore</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="w">    </span><span class="n">M2toScore</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">.</span><span class="na">shoot</span><span class="p">().</span><span class="na">andThen</span><span class="p">(</span><span class="n">scoreToM3</span><span class="p">.</span><span class="na">cmd</span><span class="p">()));</span>
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a>
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="w">    </span><span class="c1">// M3</span>
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="w">    </span><span class="n">Trigger</span><span class="w"> </span><span class="n">atM3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">routine</span><span class="p">.</span><span class="na">anyDone</span><span class="p">(</span><span class="n">scoreToM3</span><span class="p">,</span><span class="w"> </span><span class="n">M2toM3</span><span class="p">);</span>
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="w">    </span><span class="n">atM3</span><span class="p">.</span><span class="na">and</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">::</span><span class="n">hasGamepiece</span><span class="p">).</span><span class="na">onTrue</span><span class="p">(</span><span class="n">M3toScore</span><span class="p">.</span><span class="na">cmd</span><span class="p">());</span>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="w">    </span><span class="n">M3toScore</span><span class="p">.</span><span class="na">done</span><span class="p">().</span><span class="na">onTrue</span><span class="p">(</span><span class="n">shooterSubsystem</span><span class="p">.</span><span class="na">shoot</span><span class="p">());</span>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">routine</span><span class="p">;</span>
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="p">}</span>
</span></code></pre></div>
<ol>
<li><img alt="Branching Auto Map" src="../../media/choreolib-branching-auto.png" /></li>
<li><code>AutoRoutine.anyActive()</code> can be used as a shorthand for checking if any trajectories in a set are active.</li>
<li>Similar to <code>AutoRoutine.anyActive()</code>, <code>AutoRoutine.anyDone()</code> can be used as a shorthand for checking if any trajectories in a set are done.</li>
</ol>
<h2 id="auto-bindings">Auto Bindings</h2>
<p>Auto bindings are used to bind event markers in trajectories made by the <code>AutoFactory</code> to commands. Commands added to the <code>AutoFactory</code> using <code>bind</code> exhibit the same behavior as those bound to <code>AutoTrajectory.atTime(String)</code>, except they are applied globally across all routines. This is useful if you have simpler actions that you want to trigger in any trajectory without much thought.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Even if a marker is bound individually in an <code>AutoTrajectory.atTime(String)</code> trigger, the global binding will still run, and cannot be disabled for a single marker.</p>
</div>
<div class="language-java highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">autoFactory</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="p">.</span><span class="na">bind</span><span class="p">(</span><span class="s">&quot;intake&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">intakeSubsystem</span><span class="p">.</span><span class="na">intake</span><span class="p">())</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="p">.</span><span class="na">bind</span><span class="p">(</span><span class="s">&quot;score&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">scoringSubsystem</span><span class="p">.</span><span class="na">score</span><span class="p">());</span>
</span></code></pre></div>
<h2 id="autochooser">AutoChooser</h2>
<p>The <code>AutoChooser</code> (<a href="/api/choreolib/java/choreo/auto/AutoChooser.html">Java</a>) class allows you to send a list of your autonomous routines to a driver dashboard for selection before a match. It is meant to be a more efficient alternative to <code>SendableChooser</code>, taking a <a href="https://en.wikipedia.org/wiki/Lazy_loading">lazy loading</a> approach to generating command compositions or an <code>AutoRoutine</code>. This approach has the benefit of not loading all autos on startup, but also not loading the auto after the match starts, which may cause a delay when using many or large trajectories.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Due to its performance implications and support for <code>AutoRoutine</code>, using <code>AutoChooser</code> is the recommended pattern for auto selection, instead of <code>SendableChooser</code> or other alternatives.</p>
</div>
<div class="language-java highlight"><span class="filename">Robot.java</span><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Robot</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">TimedRobot</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AutoFactory</span><span class="w"> </span><span class="n">autoFactory</span><span class="p">;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">AutoChooser</span><span class="w"> </span><span class="n">autoChooser</span><span class="p">;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Robot</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">        </span><span class="c1">// Other robot initialization code</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">        </span><span class="c1">// Create the auto chooser</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">        </span><span class="n">autoChooser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AutoChooser</span><span class="p">();</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span><span class="c1">// Add options to the chooser</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">        </span><span class="n">autoChooser</span><span class="p">.</span><span class="na">addRoutine</span><span class="p">(</span><span class="s">&quot;Example Routine&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">::</span><span class="n">exampleRoutine</span><span class="p">);</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">        </span><span class="n">autoChooser</span><span class="p">.</span><span class="na">addCmd</span><span class="p">(</span><span class="s">&quot;Example Auto Command&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">::</span><span class="n">exampleAutoCommand</span><span class="p">);</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">        </span><span class="c1">// Put the auto chooser on the dashboard</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">        </span><span class="n">SmartDashboard</span><span class="p">.</span><span class="na">putData</span><span class="p">(</span><span class="n">autoChooser</span><span class="p">);</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">        </span><span class="c1">// Schedule the selected auto during the autonomous period</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">        </span><span class="n">RobotModeTriggers</span><span class="p">.</span><span class="na">autonomous</span><span class="p">().</span><span class="na">whileTrue</span><span class="p">(</span><span class="n">autoChooser</span><span class="p">.</span><span class="na">selectedCommandScheduler</span><span class="p">());</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AutoRoutine</span><span class="w"> </span><span class="nf">exampleRoutine</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Command</span><span class="w"> </span><span class="nf">exampleAutoCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">        </span><span class="c1">// ...</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="p">}</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate", "content.code.select.title", "toc.follow", "toc.integrate", "content.tabs.link", "search.share", "search.highlight", "search.suggest", "announce.dismiss", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.instant"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>